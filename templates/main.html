<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <title>Sampling studio </title>
    <style>
        body{
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        h1{
            display: flex;
            justify-content: center;
            font-size: 50px;
            
        }
        .row {
            display: flex;
          }
          .center {
            margin: auto;
            width: 50%;
            
          }
          
          .column {
            flex: 50%;
          }

          #graph1, #graph2{
            height: 500px;
            width: 200px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
            margin: 10px;
            margin-top: 100px;
          }

          #graph1{
            margin-left: 200px;
          }
          #graph2{
            margin-right : 200px;
          }

          #graph3{
            margin-left: 200px;
            margin-right: 200px;
            width: 3000px;
            height: 500px;
            border: 1px solid #ccc;
          }
    </style>
</head>
<body>
    <h1>Sampling Studio</h1>
    
    <label for="sig">Choose a Signal file:</label>
            <input type="file"
                   id="sig" name="signal"
                   accept=".xlsx, .xls, .csv" oninput="importSignal()">

<div class="row">
    <div class="column" id="graph1">
    </div>
    <div class="column" id="graph2">
    </div>
</div>
<div class="center" id="graph3" ></div>



<script>



    //Add Empty plot on load, and hide buttons and sliders
    const layout = { title: 'Original Signal', yaxis: { title: 'Amplitude', fixedrange: true }, xaxis: { title: 'Frequency', fixedrange: true, rangemode: 'tozero'}, width : 1000 }; // fixedrange -> No pan when there is no signal
        const plotDiv = document.getElementById('graph1');
        const config = {
            displayModeBar: false, //disable plotlytool bar when there is no signal
        }
        Plotly.newPlot(plotDiv, [], layout, config);
        

        
        const layout2 = { title: 'Reconstructed Signal', yaxis: { title: 'y', fixedrange: true }, xaxis: { title: 'x', fixedrange: true, rangemode: 'tozero'}, width : 1000 }; // fixedrange -> No pan when there is no signal
        const plotDiv2 = document.getElementById('graph2');
        const config2 = {
            displayModeBar: false, //disable plotlytool bar when there is no signal
        }
        Plotly.newPlot(plotDiv2, [], layout2, config2);

        const layout3 = { title: 'Difference between Original and reconstructed', yaxis: { title: 'y', fixedrange: true }, xaxis: { title: 'x', fixedrange: true, rangemode: 'tozero'}, width : 3000 }; // fixedrange -> No pan when there is no signal
        const plotDiv3 = document.getElementById('graph3');
        const config3 = {
            displayModeBar: false, //disable plotlytool bar when there is no signal
        }
        Plotly.newPlot(plotDiv3, [], layout3, config3);
    

    



    let frequency_1=[];
    let Amplitude_1=[];

    function importSignal() {
    // Get the selected file
    const fileInput = document.getElementById('sig');
    const file = fileInput.files[0];

    // Create a new FileReader object
    const reader = new FileReader();

    // Define a callback function to handle the file data
    reader.onload = (event) => {
        // Get the file data as a string
        const fileData = event.target.result;

        // Split the string into lines
        const lines = fileData.split(/\r?\n/);

        // Initialize arrays for the x and y values
        let frequency_1 = [];
        let Amplitude_1 = [];

        // Loop through the lines and split each line into columns
        for (let i = 0; i < lines.length; i++) {
            const columns = lines[i].split(',');

            // Store the column values in their respective arrays
            frequency_1.push(parseFloat(columns[0]));
            Amplitude_1.push(parseFloat(columns[1]));
        }

        // Create a new trace for the signal data
        const trace = {
            x: frequency_1,
            y: Amplitude_1,
            type: 'scatter',
            mode: 'lines',
            line: {
                color: 'blue'
            },
        };

        // Update the plot with the new trace
        Plotly.newPlot(plotDiv, [trace], layout, config);
    }

    // Read the file as text
    reader.readAsText(file);
}

</script>
</body>
</html>